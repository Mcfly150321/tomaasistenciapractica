<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Módulo de Asistencia - Scanner</title>
    <link rel="stylesheet" href="/style.css">
</head>

<body>
    <div class="container-scanner">
        <h1 class="title-scanner">Tomador de Asistencia</h1>

        <!-- Paso 1: Inicialización -->
        <div class="setup-section-scanner">
            <label for="plan-scanner">Plan</label>
            <select id="plan-scanner">
                <option value="">-- Seleccione un plan --</option>
                <option value="diario">Diario</option>
                <option value="ejecutivo">Ejecutivo</option>
                <option value="fin_de_semana">Fin de semana</option>
            </select>

            <label for="date-scanner">Fecha</label>
            <input type="date" id="date-scanner" />

            <button id="btnInit-scanner" onclick="initAssistanceScanner()">1. Iniciar Asistencia del Día</button>

            <div id="initMessage-scanner"></div>
        </div>

        <hr class="separator-scanner" />

        <!-- Paso 2: Escaneo -->
        <div id="markingSection-scanner">
            <h3 class="subtitle-scanner">2. Registro por QR</h3>
            
            <div id="scannerWrapper-scanner">
                <div id="reader-scanner"></div>
                
                <!-- Overlay de resultado (Éxito o Error) -->
                <div id="resultOverlay-scanner">
                    <div class="result-container-scanner">
                        <!-- Círculo de Éxito -->
                        <div id="successCircle-scanner" class="icon-circle-scanner success-bg-scanner">
                            <svg class="icon-svg-scanner" viewBox="0 0 52 52">
                                <circle cx="26" cy="26" r="25" fill="none"/>
                                <path class="checkmark-path-scanner" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
                            </svg>
                        </div>
                        
                        <!-- Círculo de Error -->
                        <div id="errorCircle-scanner" class="icon-circle-scanner error-bg-scanner" style="display:none;">
                            <svg class="icon-svg-scanner" viewBox="0 0 52 52">
                                <circle cx="26" cy="26" r="25" fill="none"/>
                                <path class="error-x-path1-scanner" fill="none" d="M16 16l20 20"/>
                                <path class="error-x-path2-scanner" fill="none" d="M36 16l-20 20"/>
                            </svg>
                        </div>

                        <div id="scanResultName-scanner" class="result-name-scanner"></div>
                        <button id="btnNext-scanner" class="next-btn-scanner" onclick="resetForNextScanner()">Siguiente Alumna</button>
                    </div>
                </div>
            </div>

            <div class="controls-scanner">
                <button id="btnStartScanner-scanner" disabled onclick="startScannerAsistencia()">Abrir Escáner</button>
                <button id="btnStopScanner-scanner" style="display:none; background-color:#d93025;" onclick="stopScannerExplicitScanner()">Cerrar Cámara</button>
            </div>
            
            <div id="message-scanner"></div>

            <!-- Listado de registros recientes -->
            <div class="recent-scans-wrapper-scanner">
                <h4 class="recent-scans-title-scanner">Registros Recientes</h4>
                <div id="recentScansContainer-scanner">
                    <!-- Las cards se insertan aquí vía JS -->
                </div>
            </div>
        </div>

        <hr class="separator-scanner" />
        
        <!-- Vista de alumnas -->
        <button class="secondary-btn-scanner" onclick="loadStudentsScanner()">Ver listado de alumnas</button>
        <ul id="studentList-scanner" class="student-list-scanner"></ul>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/html5-qrcode"></script>
    <script src="/app.js"></script>

</body>
</html>
