<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Tomador de Asistencia</title>
    <link rel="stylesheet" href="/style.css">
</head>

<body>
    <div class="container">
        <h1>Tomador de Asistencia</h1>

        <!-- Paso 1: Inicialización -->
        <label for="plan">Plan</label>
        <select id="plan">
            <option value="">-- Seleccione un plan --</option>
            <option value="diario">Diario</option>
            <option value="ejecutivo">Ejecutivo</option>
            <option value="fin_de_semana">Fin de semana</option>
        </select>

        <label for="date">Fecha</label>
        <input type="date" id="date" />

        <button id="btnInit" onclick="initAssistance()">1. Iniciar Asistencia del Día</button>

        <div id="initMessage"></div>

        <hr />

        <!-- Paso 2: Escaneo -->
        <div id="markingSection">
            <h3>2. Registro por QR</h3>
            
            <div id="scannerWrapper">
                <div id="reader"></div>
                
                <!-- Overlay de éxito refinado -->
                <div id="successOverlay">
                    <div class="success-container">
                        <div class="checkmark-circle">✓</div>
                        <div id="scanResultName" style="font-weight:bold; color:#188038;"></div>
                        <button class="next-btn" onclick="resetForNext()">Siguiente Alumna</button>
                    </div>
                </div>
            </div>

            <button id="btnStartScanner" disabled onclick="startScanner()">Abrir Escáner</button>
            <button id="btnStopScanner" style="display:none; background-color:#d93025;" onclick="stopScannerExplicit()">Cerrar Cámara</button>
            
            <div id="message"></div>
        </div>

        <hr />
        
        <!-- Vista de alumnas -->
        <button class="secondary-btn" onclick="loadStudents()">Ver listado de alumnas</button>
        <ul id="studentList"></ul>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/html5-qrcode"></script>
    <script src="/app.js"></script>

</body>
</html>
